/* ============================================================
   styles.css — PerformanceIQ v3.3
   Enhanced clarity • Stronger active state • Better light theme
   ============================================================ */

@import url('https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@700;800&family=DM+Sans:wght@400;500;600;700&display=swap');

/* ============================================================
   DESIGN TOKENS
   ============================================================ */

:root {
  --ok:     #22C55E;
  --warn:   #F59E0B;
  --danger: #EF4444;
  --info:   #3B82F6;

  --accent:   #2EC4B6;
  --accent-2: rgba(46, 196, 182, .14);
  --accent-3: rgba(46, 196, 182, .28);

  --font-body: "DM Sans", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  --font-head: "Barlow Condensed", "DM Sans", system-ui, sans-serif;

  --sp-xs: 6px;
  --sp-sm: 10px;
  --sp-md: 14px;
  --sp-lg: 18px;

  --focus-ring: 0 0 0 3px rgba(46, 196, 182, .35);
  --transition: .15s ease;

  --select-arrow-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%234a5876' d='M1 1l5 5 5-5'/%3E%3C/svg%3E");
  --select-arrow-dark:  url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%23a3a8c4' d='M1 1l5 5 5-5'/%3E%3C/svg%3E");
  --select-arrow: var(--select-arrow-dark);
}

/* ============================================================
   DARK THEME
   ============================================================ */

html[data-theme="dark"] {
  --bg:      #07080b;
  --top:     #050608;
  --card:    #0b0e18;
  --muted:   #a3a8c4;
  --line:    #151a28;
  --text:    #e8eaf4;
  --input:   #0d1018;
  --shadow:  0 8px 22px rgba(3, 6, 15, .6);
  --optionbg:   #0d1018;
  --optionfg:   #e8eaf4;
  --pillBorder: rgba(255, 255, 255, .14);
  --activeViewRing: 0 0 0 2px var(--accent-3), 0 14px 40px rgba(3, 6, 15, .6);
  --select-arrow: var(--select-arrow-dark);
}

/* ============================================================
   LIGHT THEME (Improved Readability)
   ============================================================ */

html[data-theme="light"] {
  --bg:      #f4f7fb;
  --top:     #ffffff;
  --card:    #ffffff;
  --muted:   #3e4c66;
  --line:    rgba(15, 23, 42, .14);
  --text:    #0b1220;
  --input:   #eef2ff;
  --shadow:  0 14px 36px rgba(8, 18, 40, .10);
  --optionbg:   #ffffff;
  --optionfg:   #0b1220;
  --pillBorder: rgba(15, 23, 42, .16);
  --activeViewRing: 0 0 0 2px var(--accent-3), 0 18px 44px rgba(8, 18, 40, .12);
  --select-arrow: var(--select-arrow-light);
}

/* ============================================================
   RESET
   ============================================================ */

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-body);
  font-variant-numeric: tabular-nums;
}

/* ============================================================
   FOCUS SYSTEM
   ============================================================ */

:focus-visible { outline: none; box-shadow: var(--focus-ring); }
:focus:not(:focus-visible) { outline: none; }

/* ============================================================
   TYPOGRAPHY IMPROVEMENTS
   ============================================================ */

.card-title,
.drawer-title,
.sheet-title {
  font-family: var(--font-head);
  font-weight: 800;
  letter-spacing: .02em;
  font-size: 18px;
}

.minihead {
  font-weight: 900;
  font-size: 14px;
  letter-spacing: .02em;
}

.small { font-size: 12px; }
.muted { color: var(--muted); }

/* ============================================================
   ACTIVE VIEW CLARITY
   ============================================================ */

.view.is-active {
  box-shadow: var(--activeViewRing);
  border-radius: 18px;
  transition: box-shadow .2s ease;
}

/* ============================================================
   NAVIGATION IMPROVEMENTS
   ============================================================ */

.navbtn,
.tab {
  font-weight: 900;
  letter-spacing: .02em;
}

.navbtn.active,
.tab.active {
  background: var(--accent-2);
  color: var(--text);
  border-radius: 12px;
}

.navbtn:not(.active):hover,
.tab:not(.active):hover {
  background: color-mix(in oklab, var(--card) 88%, var(--accent-2));
}

/* ============================================================
   BUTTONS (Stronger Light Mode)
   ============================================================ */

.btn {
  font-weight: 900;
  border-radius: 14px;
}

html[data-theme="light"] .btn:not(.ghost):not(.danger) {
  background: var(--accent);
  color: #fff;
  border-color: transparent;
  box-shadow: 0 10px 24px rgba(8, 18, 40, .12);
}

html[data-theme="light"] .btn:hover {
  filter: brightness(1.06);
}

/* ============================================================
   FORM IMPROVEMENTS
   ============================================================ */

.field input,
.field select,
.field textarea {
  font-weight: 500;
  border-radius: 14px;
}

.field select {
  background-image: var(--select-arrow);
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 30px;
}

/* Better dropdown contrast in light mode */
html[data-theme="light"] .field select {
  background-color: #eef3ff;
}

/* ============================================================
   FAB ENHANCEMENT
   ============================================================ */

.fab {
  border-radius: 20px;
  font-weight: 900;
  transition: transform .15s ease, filter .15s ease;
}

.fab:hover {
  transform: translateY(-2px);
}

html[data-theme="light"] .fab {
  background: var(--accent);
  color: #fff;
  box-shadow: 0 14px 30px rgba(8, 18, 40, .16);
}

/* ============================================================
   CARD LIFT IMPROVEMENT
   ============================================================ */

.card {
  border-radius: 16px;
  transition: box-shadow .2s ease, transform .15s ease;
}

.card:hover {
  transform: translateY(-2px);
}

/* ============================================================
   DRAWER
   ============================================================ */

.drawer {
  border-radius: 0;
}

html[data-theme="light"] .drawer {
  box-shadow: 0 18px 44px rgba(8, 18, 40, .12);
}

/* ============================================================
   MOBILE IMPROVEMENTS
   ============================================================ */

.bottomnav {
  backdrop-filter: blur(10px);
}

.tab.active {
  position: relative;
}

.tab.active::after {
  content: "";
  position: absolute;
  bottom: 4px;
  left: 50%;
  transform: translateX(-50%);
  width: 28px;
  height: 3px;
  border-radius: 999px;
  background: var(--accent);
}

/* ============================================================
   REDUCED MOTION
   ============================================================ */

@media (prefers-reduced-motion: reduce) {
  .btn, .navbtn, .tab, .drawer, .fab, .card {
    transition: none;
  }
}
