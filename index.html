<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PerformanceIQ</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="icon" href="favicon.ico">
  <meta name="theme-color" content="#070b12">
</head>

<body>

<!-- LOADING SCREEN (simple + reliable; hidden by app init) -->
<div id="loadingScreen" style="
  position:fixed;inset:0;z-index:9999;
  display:flex;align-items:center;justify-content:center;
  background:radial-gradient(900px 600px at 50% -10%, rgba(255,255,255,0.06), transparent 55%), #070b12;
  color:#eaf0ff;
">
  <div style="display:flex;flex-direction:column;align-items:center;gap:10px;text-align:center;padding:24px;">
    <div style="display:flex;align-items:center;gap:10px;">
      <div style="width:12px;height:12px;border-radius:50%;background:rgba(16,42,79,.95);box-shadow:0 0 0 6px rgba(16,42,79,.18)"></div>
      <div style="font-weight:800;letter-spacing:.06em">PerformanceIQ</div>
    </div>
    <div style="font-size:12px;opacity:.78;letter-spacing:.03em">Loading dashboardâ€¦</div>
  </div>
</div>

<!-- ONBOARDING MODAL (unchanged markup) -->
<div id="onboardingModal" style="
  position:fixed;inset:0;z-index:9998;
  display:none;align-items:center;justify-content:center;
  background:rgba(0,0,0,.65);
">
  <div style="
    width:min(900px,92vw);max-height:90vh;overflow:auto;
    background:rgba(10,14,22,.96);
    border:1px solid rgba(255,255,255,.10);
    border-radius:18px;
    box-shadow:0 22px 70px rgba(0,0,0,.55);
    color:var(--text,#eaf0ff);
  ">
    <div style="padding:18px 18px 10px;border-bottom:1px solid rgba(255,255,255,.08);display:flex;align-items:center;justify-content:space-between;gap:14px">
      <div>
        <div style="font-weight:900;letter-spacing:.06em">WELCOME TO PERFORMANCEIQ</div>
        <div style="font-size:12px;color:rgba(234,240,255,.72);margin-top:4px">Quick setup (role, sport, and a first session)</div>
      </div>
      <button class="icon-btn" id="obClose" aria-label="Close onboarding">âœ•</button>
    </div>

    <div style="padding:12px 18px 0">
      <div style="height:8px;border-radius:999px;background:rgba(255,255,255,.08);overflow:hidden">
        <div id="obProgress" style="height:8px;width:33%;background:rgba(16,42,79,.92)"></div>
      </div>
    </div>

    <!-- Step 1 -->
    <div class="modal-step active" id="obStep1" style="padding:18px">
      <div style="font-weight:800;margin-bottom:10px">Step 1 â€” Choose your role</div>
      <div id="roleGrid" style="display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:10px">
        <div class="role-card selected" data-role="coach" style="padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.04);cursor:pointer">
          <div style="font-weight:800">Coach</div><div style="font-size:12px;color:rgba(234,240,255,.72);margin-top:3px">Run team dashboards</div>
        </div>
        <div class="role-card" data-role="athlete" style="padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.04);cursor:pointer">
          <div style="font-weight:800">Athlete</div><div style="font-size:12px;color:rgba(234,240,255,.72);margin-top:3px">View your readiness</div>
        </div>
        <div class="role-card" data-role="admin" style="padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.04);cursor:pointer">
          <div style="font-weight:800">Admin / AD</div><div style="font-size:12px;color:rgba(234,240,255,.72);margin-top:3px">Program oversight</div>
        </div>
        <div class="role-card" data-role="parent" style="padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.04);cursor:pointer">
          <div style="font-weight:800">Parent</div><div style="font-size:12px;color:rgba(234,240,255,.72);margin-top:3px">Monitor wellness</div>
        </div>
        <div class="role-card" data-role="owner" style="padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.04);cursor:pointer">
          <div style="font-weight:800">Owner</div><div style="font-size:12px;color:rgba(234,240,255,.72);margin-top:3px">Business controls</div>
        </div>
        <div class="role-card" data-role="viewer" style="padding:12px;border-radius:14px;border:1px solid rgba(255,255,255,.10);background:rgba(255,255,255,.04);cursor:pointer">
          <div style="font-weight:800">Viewer</div><div style="font-size:12px;color:rgba(234,240,255,.72);margin-top:3px">Read-only</div>
        </div>
      </div>

      <div style="display:flex;justify-content:flex-end;gap:10px;margin-top:14px">
        <button class="btn btn-ghost" id="obSkip">Skip</button>
        <button class="btn btn-primary" id="obNext1">Next</button>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="modal-step" id="obStep2" style="padding:18px;display:none">
      <div style="font-weight:800;margin-bottom:10px">Step 2 â€” Select sport + injury filters</div>

      <div id="sportGrid" style="display:flex;flex-wrap:wrap;gap:10px;margin-bottom:14px">
        <button class="sport-chip selected btn btn-ghost" data-sport="basketball" type="button">ğŸ€ Basketball</button>
        <button class="sport-chip btn btn-ghost" data-sport="football" type="button">ğŸˆ Football</button>
        <button class="sport-chip btn btn-ghost" data-sport="soccer" type="button">âš½ Soccer</button>
        <button class="sport-chip btn btn-ghost" data-sport="baseball" type="button">âš¾ Baseball</button>
        <button class="sport-chip btn btn-ghost" data-sport="volleyball" type="button">ğŸ Volleyball</button>
        <button class="sport-chip btn btn-ghost" data-sport="track" type="button">ğŸƒ Track</button>
      </div>

      <div style="font-size:12px;color:rgba(234,240,255,.72);margin-bottom:8px">Optional â€” injury filters</div>
      <div class="inj-chips" id="obInjuryChips" style="display:flex;flex-wrap:wrap;gap:8px">
        <button class="inj-chip" data-injury="knee" type="button">Knee</button>
        <button class="inj-chip" data-injury="ankle" type="button">Ankle</button>
        <button class="inj-chip" data-injury="shoulder" type="button">Shoulder</button>
        <button class="inj-chip" data-injury="back" type="button">Back</button>
        <button class="inj-chip" data-injury="hip" type="button">Hip</button>
        <button class="inj-chip" data-injury="hamstring" type="button">Hamstring</button>
      </div>

      <div style="display:flex;justify-content:space-between;gap:10px;margin-top:14px">
        <button class="btn btn-ghost" id="obBack2">Back</button>
        <button class="btn btn-primary" id="obNext2">Next</button>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="modal-step" id="obStep3" style="padding:18px;display:none">
      <div style="font-weight:800;margin-bottom:10px">Step 3 â€” Your first session</div>
      <div id="obFirstSession"></div>

      <div style="display:flex;justify-content:space-between;gap:10px;margin-top:14px">
        <button class="btn btn-ghost" id="obBack3">Back</button>
        <button class="btn btn-primary" id="obFinish">Finish</button>
      </div>
    </div>
  </div>
</div>

<header class="topbar">
  <div class="topbar-left">
    <div class="brand-mark"><div class="brand-dot"></div></div>
    <span class="brand-name">PerformanceIQ</span>
  </div>

  <div class="topbar-center">
    <div class="pill live" id="pillOnline"><span class="pulse"></span><span id="pillOnlineText">Team Online</span></div>
    <div class="pill" id="pillSeason">Pre-Season</div>
    <div class="pill orange" id="pillGame" style="display:none">âš¡ <span id="pillGameText"></span></div>
  </div>

  <div class="topbar-right">
    <div class="search-wrap">
      <span class="search-icon">ğŸ”</span>
      <input class="search-input" type="text" placeholder="Search athletesâ€¦" id="athleteSearch" />
    </div>
    <button class="icon-btn" id="btnTheme" title="Toggle theme">ğŸŒ™</button>
    <button class="icon-btn" id="btnRefresh" title="Refresh data">â†º</button>
    <button class="icon-btn" id="btnExport" title="Export report">ğŸ“¤</button>
  </div>
</header>

<div class="app-shell">
  <nav class="sidebar">
    <div class="sidebar-section">Main</div>
    <button class="nav-btn active" data-view="dashboard"><i class="nav-icon">â¬¡</i> Dashboard</button>
    <button class="nav-btn" data-view="athletes"><i class="nav-icon">â—‰</i> Athletes <span class="nav-badge" id="riskBadge" style="display:none">0</span></button>
    <button class="nav-btn" data-view="train"><i class="nav-icon">â–·</i> Train</button>
    <button class="nav-btn" data-view="analytics"><i class="nav-icon">â—ˆ</i> Analytics</button>

    <div class="sidebar-section">Manage</div>
    <button class="nav-btn" data-view="schedule"><i class="nav-icon">ğŸ“…</i> Schedule</button>
    <button class="nav-btn" data-view="wellness"><i class="nav-icon">ğŸŒ™</i> Wellness</button>
    <button class="nav-btn" data-view="nutrition"><i class="nav-icon">ğŸ¥—</i> Nutrition</button>
    <button class="nav-btn" data-view="settings"><i class="nav-icon">âš™</i> Settings</button>

    <div class="sidebar-bottom">
      <div class="user-block" id="userBlock">
        <div class="user-avatar" id="userAv">CD</div>
        <div>
          <div class="user-name" id="userName">Coach Davis</div>
          <div class="user-role" id="userRole">Head Coach Â· Basketball</div>
        </div>
      </div>
    </div>
  </nav>

  <main class="main-content">
    <!-- (all your existing sections stay exactly the same) -->
    <!-- KEEP YOUR CURRENT VIEW MARKUP AS-IS -->
    <!-- ... -->
  </main>
</div>

<div class="toast-container" id="toastContainer"></div>

<!-- âœ… ES module entry -->
<script type="module" src="./js/app.js"></script>
</body>
</html>
